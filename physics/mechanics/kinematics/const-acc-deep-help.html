<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Constant Acceleration – Study Help · PromptSchola Physics</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta
    name="description"
    content="Targeted AI-powered study help for the nano-lesson 'Constant Acceleration' – exam traps, confusions, and deeper intuition prompts."
  />

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=Lora:ital,wght@0,600;0,700;1,500&display=swap" rel="stylesheet">

  <script>
    window.MathJax = {
      tex: { inlineMath: [['\\(','\\)'], ['$', '$']], displayMath: [['\\[','\\]'], ['$$','$$']] },
      svg: { fontCache: 'global' }
    };
  </script>
  <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js"></script>

  <style>
    :root {
      --bg-body: #f3f4f6;
      --bg-surface: #f9fafb;
      --bg-card: #ffffff;

      --accent: #7e22ce;
      --accent-strong: #6d28d9;
      --accent-soft: rgba(126, 34, 206, 0.09);
      --accent-soft2: rgba(129, 140, 248, 0.12);

      --text-main: #111827;
      --text-muted: #4b5563;
      --text-subtle: #9ca3af;
      --text-strong: #020617;

      --border-subtle: rgba(209, 213, 219, 0.55);
      --radius-card: 18px;
      --radius-pill: 999px;
      --shadow-soft: 0 18px 40px rgba(15, 23, 42, 0.12);
      --shadow-card: 0 16px 35px rgba(15, 23, 42, 0.12);

      --font-heading: 'Lora', serif;
      --font-body: 'Inter', system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;

      --transition-fast: 0.25s ease-out;
    }

    * { box-sizing: border-box; margin: 0; padding: 0; }
    a { text-decoration: none; color: inherit; }

    body {
      font-family: var(--font-body);
      background: radial-gradient(circle at top, #e5e7eb, #f9fafb 45%, #f3f4f6);
      color: var(--text-main);
      line-height: 1.7;
      -webkit-font-smoothing: antialiased;
      font-size: 16.5px;
      letter-spacing: -0.01em;
      overflow-x: hidden;
    }

    h1, h2, h3 {
      font-family: var(--font-heading);
      color: var(--text-strong);
      line-height: 1.15;
    }

    .page { min-height: 100vh; display: flex; flex-direction: column; }
    .container { width: 100%; max-width: 1120px; margin: 0 auto; padding: 0 1.4rem; }

    header {
      position: sticky; top: 0; z-index: 40;
      backdrop-filter: blur(14px);
      background: linear-gradient(
        to bottom,
        rgba(249, 250, 251, 0.96),
        rgba(249, 250, 251, 0.94),
        rgba(249, 250, 251, 0.9)
      );
      border-bottom: 1px solid rgba(209, 213, 219, 0.9);
    }

    .nav {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0.75rem 0;
      gap: 1rem;
    }

    .nav-left { display:flex; align-items:center; gap:0.75rem; }

    .logo-mark {
      width: 34px; height: 34px; border-radius: 40%;
      background: radial-gradient(circle at 30% 30%, var(--accent), var(--accent-strong));
      display: flex; align-items: center; justify-content: center;
      font-weight: 800; font-size: 1rem; color: #f9fafb;
      font-family: var(--font-body);
    }

    .logo-text span:first-child {
      display: block; font-weight: 700; font-size: 1.02rem;
      letter-spacing: 0.02em; color: var(--text-strong);
      font-family: var(--font-body); line-height: 1.1;
    }
    .logo-text span:last-child {
      display: block; font-size: 0.76rem; color: var(--text-subtle);
      font-family: var(--font-body);
    }

    .nav-links {
      display: flex; align-items: center; gap: 1.3rem;
      font-size: 0.95rem;
    }

    .nav-links a {
      color: var(--text-muted); opacity: 0.9;
      transition: opacity var(--transition-fast), color var(--transition-fast);
      font-family: var(--font-body);
    }
    .nav-links a:hover { opacity: 1; color: var(--accent-strong); }

    .nav-right {
      display: flex; align-items: center; gap: 0.6rem;
      font-size: 0.9rem; font-family: var(--font-body);
      flex-wrap: wrap; justify-content: flex-end;
    }

    .btn-pill {
      border-radius: var(--radius-pill);
      padding: 0.45rem 0.95rem;
      font-size: 0.86rem;
      border: 1px solid rgba(209, 213, 219, 0.9);
      background: #ffffff;
      color: var(--text-main);
      cursor: pointer;
      transition: background var(--transition-fast), transform var(--transition-fast), box-shadow var(--transition-fast), border-color var(--transition-fast);
      font-family: var(--font-body);
      display: inline-flex;
      align-items: center;
      justify-content: center;
      white-space: nowrap;
    }
    .btn-pill:hover {
      background: #f3f4f6;
      transform: translateY(-1px);
      border-color: rgba(156, 163, 175, 0.9);
      box-shadow: 0 8px 20px rgba(148, 163, 184, 0.35);
    }

    .btn-primary {
      border-radius: var(--radius-pill);
      padding: 0.6rem 1.3rem;
      font-size: 0.9rem;
      font-weight: 600;
      border: none;
      cursor: pointer;
      background: radial-gradient(circle at 30% 0%, #a855f7, #7e22ce, #4c1d95);
      color: #f9fafb;
      box-shadow: none;
      transition: transform var(--transition-fast), filter var(--transition-fast), background var(--transition-fast);
      font-family: var(--font-body);
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 0.35rem;
      white-space: nowrap;
    }
    .btn-primary:hover {
      transform: translateY(-1px);
      filter: brightness(1.03);
      background: radial-gradient(circle at 30% 0%, #c084fc, #7e22ce, #4c1d95);
    }

    .btn-primary[disabled],
    .btn-pill[disabled],
    .btn-ghost[disabled] {
      opacity: 0.55;
      cursor: not-allowed;
      transform: none !important;
      filter: none !important;
      box-shadow: none !important;
    }

    .btn-ghost {
      padding: 0.42rem 0.9rem;
      border-radius: var(--radius-pill);
      font-size: 0.82rem;
      border: 1px solid rgba(209, 213, 219, 0.9);
      background: #ffffff;
      cursor: pointer;
      transition: var(--transition-fast);
      font-family: var(--font-body);
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 0.25rem;
      white-space: nowrap;
    }
    .btn-ghost:hover { background: #f3f4f6; transform: translateY(-1px); }
    .btn-copy { font-size: 0.78rem; padding: 0.32rem 0.85rem; }

    main { padding-bottom: 2.6rem; }
    section { padding: 1.4rem 0; }

    .hero {
      padding: 3.6rem 0 1.4rem;
      position: relative;
      overflow: hidden;
      text-align: left;
    }

    .hero::before {
      content: "";
      position: absolute;
      inset: -80px;
      pointer-events: none;
      background:
        radial-gradient(circle at 10% 0%, rgba(129, 140, 248, 0.40), transparent 60%),
        radial-gradient(circle at 90% 40%, rgba(168, 85, 247, 0.35), transparent 55%);
      opacity: 0.9;
      z-index: -1;
    }

    .hero-kicker {
      display: inline-flex;
      align-items: center;
      gap: 0.55rem;
      font-size: 0.78rem;
      text-transform: uppercase;
      letter-spacing: 0.15em;
      color: var(--accent-strong);
      font-weight: 800;
      margin-bottom: 1.0rem;
      font-family: var(--font-body);
    }

    .hero-kicker .label {
      padding: 0.18rem 0.7rem;
      border-radius: 8px;
      border: 1px solid rgba(129, 140, 248, 0.22);
      background: var(--accent-soft2);
      color: var(--accent-strong);
      font-weight: 900;
      letter-spacing: 0.14em;
      font-family: var(--font-body);
    }

    .hero-title {
      font-size: clamp(2.0rem, 3.4vw, 2.6rem);
      line-height: 1.12;
      font-weight: 700;
      margin: 0 auto 0.75rem 0;
      max-width: 60rem;
      color: var(--text-strong);
    }

    .hero-subtitle {
      font-size: 1.06rem;
      max-width: 52rem;
      color: var(--text-muted);
      margin: 0;
      line-height: 1.6;
      font-family: var(--font-body);
    }

    .hero-breadcrumbs {
      margin-top: 0.95rem;
      font-size: 0.86rem;
      color: var(--text-subtle);
      font-family: var(--font-body);
    }
    .hero-breadcrumbs a { color: var(--accent-strong); }

    .help-banner {
      background: #0f172a;
      color: #f8fafc;
      border-radius: 28px;
      padding: 1.35rem 1.4rem;
      position: relative;
      overflow: hidden;
      border: 1px solid rgba(148, 163, 184, 0.18);
      box-shadow: var(--shadow-soft);
      max-width: 1120px;
      margin: 0 auto;
    }

    .help-banner::before {
      content: "";
      position: absolute;
      inset: -120px;
      pointer-events: none;
      background:
        radial-gradient(circle at 15% 25%, rgba(168, 85, 247, 0.22), transparent 60%),
        radial-gradient(circle at 80% 30%, rgba(129, 140, 248, 0.20), transparent 58%);
      filter: blur(16px);
      opacity: 0.9;
    }

    .help-banner-inner {
      position: relative;
      z-index: 1;
      display: flex;
      gap: 1rem;
      align-items: center;
      justify-content: space-between;
      flex-wrap: wrap;
    }

    .help-banner-title {
      font-family: var(--font-heading);
      font-size: 1.28rem;
      color: #ffffff;
      margin-bottom: 0.2rem;
      font-weight: 700;
    }

    .help-banner-desc {
      font-family: var(--font-body);
      color: #cbd5e1;
      font-size: 0.98rem;
      line-height: 1.6;
      max-width: 58rem;
    }

    .chips { display: flex; gap: 0.55rem; flex-wrap: wrap; align-items: center; }
    .chip {
      display: inline-flex;
      align-items: center;
      font-weight: 900;
      font-size: 0.72rem;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      padding: 0.22rem 0.6rem;
      border-radius: 6px;
      font-family: var(--font-body);
      white-space: nowrap;
    }
    .chip.paid { background: #6366f1; color: #ffffff; }
    .chip.topic { background: rgba(16,185,129,0.95); color: #ffffff; }

    .help-card {
      background: var(--bg-card);
      border-radius: var(--radius-card);
      border: 1px solid var(--border-subtle);
      box-shadow: var(--shadow-card);
      padding: 1.2rem 1.25rem 1.25rem;
      font-size: 0.95rem;
    }

    .help-card-header { display: flex; flex-direction: column; gap: 0.35rem; margin-bottom: 0.8rem; }

    .help-chip-row { display: flex; flex-wrap: wrap; gap: 0.45rem; align-items: center; }

    .help-chip {
      padding: 0.16rem 0.7rem;
      border-radius: var(--radius-pill);
      border: 1px solid rgba(209, 213, 219, 0.9);
      font-size: 0.72rem;
      color: var(--text-subtle);
      background: #f9fafb;
      font-family: var(--font-body);
      font-weight: 800;
    }

    .help-topic-pill {
      padding: 0.16rem 0.65rem;
      border-radius: var(--radius-pill);
      border: 1px solid rgba(126, 34, 206, 0.35);
      font-size: 0.74rem;
      color: #4c1d95;
      background: rgba(126, 34, 206, 0.06);
      font-weight: 900;
      font-family: var(--font-body);
    }

    .help-title {
      font-size: 1.22rem;
      font-weight: 700;
      color: var(--text-strong);
      margin-top: 0.1rem;
    }

    .help-lead { font-size: 0.92rem; color: var(--text-muted); }

    .selector-row {
      margin-top: 0.75rem;
      display: flex;
      gap: 0.6rem;
      flex-wrap: wrap;
      align-items: center;
      justify-content: space-between;
    }

    .select {
      flex: 1;
      min-width: 260px;
      border-radius: 999px;
      border: 1px solid rgba(209, 213, 219, 0.9);
      background: #ffffff;
      padding: 0.45rem 0.85rem;
      font-size: 0.92rem;
      font-family: var(--font-body);
      color: var(--text-main);
      outline: none;
    }

    .help-body-layout {
      margin-top: 1.0rem;
      display: grid;
      grid-template-columns: minmax(0, 1.2fr) minmax(0, 1.5fr);
      gap: 1rem;
      align-items: flex-start;
    }

    @media (max-width: 900px) { .help-body-layout { grid-template-columns: minmax(0, 1fr); } }
    @media (max-width: 860px) { .nav-links { display: none; } }

    .prompt-box {
      border-radius: 14px;
      border: 1px solid rgba(209, 213, 219, 0.9);
      background: #f9fafb;
      padding: 0.9rem 1rem 0.9rem;
      font-size: 0.86rem;
      color: var(--text-muted);
      min-height: 165px;
      white-space: pre-wrap;
    }

    .prompt-box-header {
      font-size: 0.78rem;
      font-weight: 900;
      text-transform: uppercase;
      letter-spacing: 0.16em;
      color: var(--text-subtle);
      margin-bottom: 0.45rem;
      font-family: var(--font-body);
    }

    .ai-box {
      border-radius: 14px;
      border: 1px solid rgba(129, 140, 248, 0.35);
      background: #ffffff;
      padding: 1rem 1.1rem;
      min-height: 165px;
      font-size: 0.98rem;
      color: #111827;
      white-space: pre-wrap;
      line-height: 1.75;
      font-family: var(--font-body);
    }

    .ai-box p { margin-bottom: 0.9rem; }
    .ai-box ul, .ai-box ol { margin: 0.7rem 0 0.7rem 1.3rem; }
    .ai-box strong { font-weight: 800; color: inherit; }
    .ai-box em { font-style: italic; }

    .help-actions-row {
      margin-top: 0.95rem;
      display: flex;
      justify-content: space-between;
      gap: 0.6rem;
      flex-wrap: wrap;
      font-size: 0.86rem;
      color: var(--text-subtle);
      font-family: var(--font-body);
      align-items: center;
    }

    .help-actions-buttons { display: flex; gap: 0.45rem; flex-wrap: wrap; align-items: center; }

    footer {
      margin-top: auto;
      padding: 1.8rem 0 2.1rem;
      text-align: center;
      font-size: 0.86rem;
      color: var(--text-subtle);
      font-family: var(--font-body);
    }
  </style>
</head>

<body>
<div class="page">

  <header>
    <div class="container">
      <div class="nav">
        <div class="nav-left">
          <div class="logo-mark">P</div>
          <div class="logo-text">
            <span>PromptSchola</span>
            <span>Prompt-based STEM subjects mastery</span>
          </div>
        </div>

        <nav class="nav-links">
          <a href="/index.html">Home</a>
          <a href="/physics/physics.html">Physics</a>
          <a href="/math/math.html">Math</a>
          <a href="/chemistry/chemistry.html">Chemistry</a>
          <a href="/biology/biology.html">Biology</a>
          <a href="/pricing.html">Pricing</a>
        </nav>

        <div class="nav-right">
          <span id="nav-user" style="font-size:0.78rem;color:#9ca3af;"></span>

          <a id="nav-login-btn" href="/auth.html" class="btn-pill" onclick="PS_setPostAuthRedirect && PS_setPostAuthRedirect()">
            Sign In
          </a>

          <a id="nav-register-btn" href="/auth.html?mode=signup" class="btn-primary" onclick="PS_setPostAuthRedirect && PS_setPostAuthRedirect()">
            Register for Free
          </a>

          <button
            id="nav-signout-btn"
            type="button"
            class="btn-pill"
            style="display:none;"
            onclick="signOutUser && signOutUser()"
          >
            Sign out
          </button>
        </div>
      </div>
    </div>
  </header>

  <main>
    <section class="hero">
      <div class="container">
        <div class="hero-kicker">
          <span class="label">Help</span>
          <span>Physics · Mechanics · Kinematics (1D)</span>
        </div>

        <h1 class="hero-title">Help prompts for “Constant Acceleration”</h1>

        <p class="hero-subtitle">
          These are targeted prompt paths for the exact confusions and exam traps students face in 1D constant-acceleration problems.
          You can copy prompts any time. Running with AI is paid-only.
        </p>

        <div class="hero-breadcrumbs">
          <a href="/physics/physics.html">Physics</a> ·
          <a href="/physics/mechanics.html">Mechanics</a> ·
          <a href="/physics/kinematics-in-one-dimension.html">Kinematics in 1D</a> ·
          <a href="/physics/constant-acceleration.html">Constant Acceleration</a> ·
          <span>Study help</span>
        </div>
      </div>
    </section>

    <section>
      <div class="container">
        <div class="help-banner">
          <div class="help-banner-inner">
            <div>
              <div class="help-banner-title">How to use this page</div>
              <div class="help-banner-desc">
                This page loads the exact prompt you clicked in the nano-lesson help panel. You can also switch prompts using the selector below.
              </div>
            </div>
            <div class="chips">
              <span class="chip topic">Constant Acceleration</span>
              <span class="chip paid">Help is Paid</span>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section>
      <div class="container">
        <article class="help-card">
          <div class="help-card-header">
            <div class="help-chip-row">
              <span id="help-category-pill" class="help-chip">Category: …</span>
              <span class="help-topic-pill">Study help · Constant Acceleration</span>
            </div>

            <h2 id="help-title" class="help-title">Loading prompt…</h2>
            <p id="help-lead" class="help-lead">Please wait while the prompt loads.</p>

            <div class="selector-row">
              <select id="prompt-selector" class="select" aria-label="Select a help prompt">
                <!-- filled by JS -->
              </select>

              <a class="btn-pill" href="/physics/constant-acceleration.html">← Back to nano-lesson</a>
            </div>
          </div>

          <div class="help-body-layout">
            <div>
              <div class="prompt-box">
                <div class="prompt-box-header">Prompt (you can copy it)</div>
                <div id="prompt-text">Loading prompt text…</div>
              </div>
            </div>

            <div>
              <div id="ai-output" class="ai-box">
                Run with AI to see a guided explanation here.
              </div>
            </div>
          </div>

          <div class="help-actions-row">
            <div class="help-actions-buttons">
              <button class="btn-ghost btn-copy" type="button" onclick="copyCurrentPrompt()">Copy prompt</button>
              <button class="btn-ghost btn-copy" type="button" onclick="copyCurrentAnswer()">Copy answer</button>
              <button class="btn-primary" id="run-help-btn" type="button" onclick="runCurrentPromptWithAI()">Run with AI</button>
            </div>
            <div id="help-footnote">
              Tip: Use these prompts when graphs feel confusing, when signs trip you up, or when your answer doesn’t match your intuition.
            </div>
          </div>
        </article>
      </div>
    </section>
  </main>

  <footer>© 2025 PromptSchola. All rights reserved.</footer>
</div>

<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script src="/auth.js"></script>

<script>
  // Continue Learning marker
  window.PS_markLastLearningPage = function () {
    try {
      const path = window.location.pathname || '';
      const isIndex = path === '/' || path.endsWith('/index.html');
      const isAuth = path.endsWith('/auth.html');
      const isPricing = path.endsWith('/pricing.html');
      if (isIndex || isAuth || isPricing) return;

      const title = (document.title || '').replace(/\s+–\s+PromptSchola.*$/i, '').trim();
      const label = title || 'Continue Learning';

      localStorage.setItem('ps_last_page_path', path);
      localStorage.setItem('ps_last_page_label', label);
      localStorage.setItem('ps_last_seen_ts', String(Date.now()));
    } catch (e) {}
  };
  window.PS_markLastLearningPage();

  // Post-auth redirect helper
  function PS_setPostAuthRedirect() {
    try {
      const path = window.location.pathname + window.location.search + window.location.hash;
      localStorage.setItem('ps_post_auth_redirect', path);
    } catch (e) {}
  }
  window.PS_setPostAuthRedirect = PS_setPostAuthRedirect;

  // ---------------------------
  // Help prompts library (C1..C10) — MATCHES YOUR NANO HELP LINKS
  // ---------------------------
  const helpPromptLibrary = {
    C1: {
      id: 'C1',
      category: 'Confusions & look-alikes',
      title: 'Slope vs value: what the v–t graph is really telling you',
      lead: 'Use this when you confuse “the value of v” with “the slope of v–t” (which is acceleration).',
      prompt: `You are a friendly, rigorous Physics tutor for final-year high school and first-year university students.

Help a student understand the difference between:
• The **value** of velocity on a v–t graph
• The **slope** of the v–t graph
• The **area** under the v–t graph

Do ALL of the following:
• Explain each idea in plain language
• Give 2 short examples of common mistakes and correct them
• Include a mini “check yourself” quiz: 3 questions with answers

If you include equations, write each on its own line in LaTeX display mode:
  \\[ a = \\frac{\\Delta v}{\\Delta t} \\]

Do NOT use markdown headings like # or ###. Use **bold** for key terms.`
    },

    C2: {
      id: 'C2',
      category: 'Confusions & look-alikes',
      title: 'Average vs instantaneous acceleration (and why constant-a makes them match)',
      lead: 'Use this when you feel unsure what “instantaneous” means, or why constant acceleration simplifies things.',
      prompt: `You are a friendly, rigorous Physics tutor for final-year high school and first-year university students.

Explain:
• **Average acceleration** vs **instantaneous acceleration**
• What “instantaneous” means in a simple way
• Why in **constant acceleration** problems, these ideas effectively agree over any interval

Include:
• One v–t graph story in words (no images)
• One example where acceleration is NOT constant (air resistance) and what changes conceptually
• A short checklist: “How to tell if I can treat a as constant”

Equations (if used) must be LaTeX display, one per line.
No markdown headings like # or ###.`
    },

    C3: {
      id: 'C3',
      category: 'Tricky areas & exam traps',
      title: 'At the top of the throw: velocity is zero, acceleration is not',
      lead: 'Classic trap: at the top, v = 0 for a moment, but a is still downward.',
      prompt: `You are a friendly, rigorous Physics tutor for final-year high school and first-year university students.

Explain why, for a ball thrown upward under gravity:
• At the top: **velocity is zero** for an instant
• But **acceleration is not zero** and points downward the whole time

Do ALL of the following:
• Use a clear timeline explanation (going up → top → coming down)
• Describe what the v–t graph looks like (in words)
• Give 2 “exam trap” multiple-choice statements and explain which are true/false

If you include equations, use LaTeX display mode, one per line, such as:
  \\[ v = u + at \\]

No markdown headings like # or ###.`
    },

    C4: {
      id: 'C4',
      category: 'Tricky areas & exam traps',
      title: 'Sign conventions: choosing + upward vs + downward without confusion',
      lead: 'Use this when negative signs feel “wrong” or when you change your sign convention mid-solution.',
      prompt: `You are a friendly, rigorous Physics tutor for final-year high school and first-year university students.

Teach a reliable sign-convention method for 1D constant-acceleration problems.

Include:
• How to choose a positive direction
• How to assign signs to u, v, a, and s consistently
• A “thrown upward” example with + upward
• The SAME situation with + downward (show that both work if consistent)

End with a short checklist students can follow before substituting numbers.

Equations in LaTeX display mode, one per line.
No markdown headings like # or ###.`
    },

    C5: {
      id: 'C5',
      category: 'Common mistakes',
      title: 'Mixing up “acceleration is constant” with “velocity is constant”',
      lead: 'Use this if you mistakenly think constant acceleration means constant velocity.',
      prompt: `You are a friendly, rigorous Physics tutor for final-year high school and first-year university students.

Explain the difference between:
• **Constant velocity**
• **Constant acceleration**

Do ALL of the following:
• Give plain-language definitions
• Give one example of constant velocity (and its graphs)
• Give one example of constant acceleration (and its graphs)
• Include 4 quick “Which one is it?” scenarios with answers

If you include equations, use LaTeX display mode, one per line.
No markdown headings like # or ###. Use **bold** for key terms.`
    },

    C6: {
      id: 'C6',
      category: 'Common mistakes',
      title: 'Using the wrong kinematic equation for the knowns you have',
      lead: 'Use this when you freeze and don’t know which equation matches the given variables.',
      prompt: `You are a friendly, rigorous Physics tutor for final-year high school and first-year university students.

Teach a method for choosing the right constant-acceleration equation based on which variables are known and which are unknown.

Include:
• Define u, v, a, t, s in plain language
• A “choose-the-equation” decision guide (simple and practical)
• 3 mini examples where time is missing, displacement is missing, etc.
• A short “sanity check” list (units, sign, magnitude)

Equations in LaTeX display mode, one per line.
No markdown headings like # or ###.`
    },

    C7: {
      id: 'C7',
      category: 'When you feel stuck',
      title: 'How to draw a quick motion diagram and decide signs',
      lead: 'Use this when you don’t know how to start from the words.',
      prompt: `You are a friendly, rigorous Physics tutor for final-year high school and first-year university students.

Teach a step-by-step method to turn a constant-acceleration word problem into:
• A simple motion diagram (1D line + arrows)
• A list of knowns/unknowns (u, v, a, t, s)
• A sign convention choice

Then demonstrate the method on 1 short example problem.

Keep it concise, but very clear.
No markdown headings like # or ###.
Equations only if needed, in LaTeX display mode, one per line.`
    },

    C8: {
      id: 'C8',
      category: 'When you feel stuck',
      title: 'Given 3 variables, how to pick the right equation in 10 seconds',
      lead: 'Use this as an “exam-speed” routine to avoid wasting time.',
      prompt: `You are a friendly, rigorous Physics tutor for final-year high school and first-year university students.

Create a fast routine for picking the right kinematics equation in constant-acceleration problems.

Requirements:
• Must fit in a short list of steps a student can memorize
• Show how to handle the common “missing variable” cases
• Give 2 fast examples using the routine

No markdown headings like # or ###.
Equations (if used) in LaTeX display mode, one per line.`
    },

    C9: {
      id: 'C9',
      category: 'Concept bridges',
      title: 'How constant-a leads into Newton’s laws (forces cause acceleration)',
      lead: 'Use this if you want the “why” behind constant acceleration and how it connects to forces.',
      prompt: `You are a friendly, rigorous Physics tutor for final-year high school and first-year university students.

Explain how constant acceleration connects to Newton’s laws.

Include:
• Why constant net force implies constant acceleration (conceptually)
• A real example: free fall (gravity) and/or a block pulled by a steady force
• How kinematics (motion) and dynamics (forces) complement each other
• One quick “check yourself” question with answer

Equations in LaTeX display mode, one per line (e.g., F = ma).
No markdown headings like # or ###.`
    },

    C10: {
      id: 'C10',
      category: 'Concept bridges',
      title: 'How derivatives/integrals connect to v = dx/dt and a = dv/dt',
      lead: 'Use this if you want to see how constant-a kinematics is really “calculus in disguise.”',
      prompt: `You are a friendly, rigorous Physics tutor for final-year high school and first-year university students.

Explain the calculus connections behind constant-acceleration motion:

• Velocity as the derivative of position
• Acceleration as the derivative of velocity
• Displacement as the integral of velocity
• Change in velocity as the integral of acceleration

Then explain (in plain language) why “constant acceleration” makes the graphs and equations so simple.

Equations must be in LaTeX display mode, one per line, for example:
  \\[ v = \\frac{dx}{dt} \\]
  \\[ a = \\frac{dv}{dt} \\]

No markdown headings like # or ###.`
    }
  };

  let currentHelpId = null;
  let lastAiAnswer = '';

  function formatOutput(text) {
    if (!text) return '';

    let safe = text
      .replace(/&/g, '&amp;')
      .replace(/</g, '&lt;')
      .replace(/>/g, '&gt;');

    safe = safe
      .replace(/\\\\\[/g, '\\[')
      .replace(/\\\\\]/g, '\\]')
      .replace(/\\\\\(/g, '\\(')
      .replace(/\\\\\)/g, '\\)');

    safe = safe.replace(/^#{1,6}\s+(.+)$/gm, '<strong>$1</strong>');
    safe = safe.replace(/^\s*[-*]\s+/gm, '• ');
    safe = safe.replace(/\*\*(.+?)\*\*/g, '<strong>$1</strong>');
    safe = safe.replace(/\*(.+?)\*/g, '<em>$1</em>');
    safe = safe.replace(/\n\n+/g, '</p><p>');
    safe = safe.replace(/\n/g, '<br>');
    return '<p>' + safe + '</p>';
  }

  function setRunBtnRunning(running) {
    const btn = document.getElementById('run-help-btn');
    if (!btn) return;
    if (running) {
      btn.dataset.prevText = btn.textContent;
      btn.textContent = 'Running…';
      btn.disabled = true;
      btn.setAttribute('aria-busy', 'true');
    } else {
      btn.disabled = false;
      btn.textContent = btn.dataset.prevText || 'Run with AI';
      btn.removeAttribute('aria-busy');
    }
  }

  function populateSelectorAndSetCurrent(id) {
    const selector = document.getElementById('prompt-selector');
    if (!selector) return;

    const ids = Object.keys(helpPromptLibrary);
    selector.innerHTML = ids.map((key) => {
      const item = helpPromptLibrary[key];
      const label = `${item.id} · ${item.category} · ${item.title}`;
      return `<option value="${item.id}">${label}</option>`;
    }).join('');

    selector.value = helpPromptLibrary[id] ? id : 'C1';

    selector.addEventListener('change', () => {
      const newId = selector.value;
      const url = new URL(window.location.href);
      url.searchParams.set('id', newId);
      window.history.replaceState({}, '', url.toString());
      loadHelpPromptFromId(newId);
    });
  }

  function loadHelpPromptFromId(id) {
    const entry = helpPromptLibrary[id] || helpPromptLibrary['C1'];
    currentHelpId = entry.id;

    const categoryPill = document.getElementById('help-category-pill');
    const titleEl = document.getElementById('help-title');
    const leadEl = document.getElementById('help-lead');
    const promptTextEl = document.getElementById('prompt-text');
    const aiOutputEl = document.getElementById('ai-output');

    if (categoryPill) categoryPill.textContent = 'Category: ' + (entry.category || 'Study help');
    if (titleEl) titleEl.textContent = entry.title || 'Study help prompt';
    if (leadEl) leadEl.textContent = entry.lead || '';
    if (promptTextEl) promptTextEl.textContent = entry.prompt || '';
    if (aiOutputEl) aiOutputEl.textContent = 'Run with AI to see a guided explanation here.';

    lastAiAnswer = '';

    if (window.MathJax?.typesetPromise) {
      MathJax.typesetPromise([promptTextEl]).catch(()=>{});
    }
  }

  function loadHelpPromptFromUrl() {
    const params = new URLSearchParams(window.location.search);
    const id = params.get('id') || 'C1';
    populateSelectorAndSetCurrent(id);
    loadHelpPromptFromId(id);
  }

  function gateHelpPageUI(isPaid) {
    const runBtn = document.getElementById('run-help-btn');
    const aiOutputEl = document.getElementById('ai-output');

    if (!isPaid) {
      if (runBtn) {
        runBtn.textContent = 'Unlock Help';
        runBtn.onclick = () => { window.location.href = '/pricing.html'; };
      }
      if (aiOutputEl) {
        aiOutputEl.innerHTML = formatOutput(
          `This page is part of **Mastery (paid)** access.\n\n` +
          `You can still view and copy the prompt, but **Run with AI** is locked.\n\n` +
          `Go to pricing to unlock Help.`
        );
      }
    }
  }

  async function runCurrentPromptWithAI() {
    if (!currentHelpId || !helpPromptLibrary[currentHelpId]) {
      alert('No prompt selected yet.');
      return;
    }

    // Require login for Run-with-AI
    if (typeof ensureLoggedInOrRedirect === 'function') {
      const user = await ensureLoggedInOrRedirect();
      if (!user) return;
    }

    // Require paid
    let tier = 'free';
    if (typeof PS_getUserTier === 'function') {
      try { tier = await PS_getUserTier({ forceRefresh: true }); } catch (_) { tier = 'free'; }
    }
    if (tier !== 'paid') {
      window.location.href = '/pricing.html';
      return;
    }

    const token = (typeof PS_getAccessToken === 'function') ? await PS_getAccessToken() : null;
    if (!token) {
      alert('Session missing. Please sign in again.');
      return;
    }

    const prompt = helpPromptLibrary[currentHelpId].prompt;
    const aiOutputEl = document.getElementById('ai-output');
    if (!aiOutputEl) return;

    setRunBtnRunning(true);

    try {
      aiOutputEl.textContent = 'Running with AI…';

      const res = await fetch('/api/run-step', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
          'Authorization': `Bearer ${token}`
        },
        // Help is paid; use step 6 to align with paywall rules
        body: JSON.stringify({ prompt, step: 6 })
      });

      if (!res.ok) {
        let msg = 'There was an error contacting the AI. Please try again later.';
        try {
          const err = await res.json();
          if (err?.error) msg = err.error;
          if (err?.code === 'PAYWALL') msg = 'This help prompt requires Mastery (paid) access.';
          if (err?.code === 'INVALID_SESSION') msg = 'Session expired. Please sign in again.';
          if (err?.code === 'AUTH_REQUIRED') msg = 'Please sign in to use Run with AI.';
        } catch (_) {}
        aiOutputEl.textContent = msg;
        return;
      }

      const data = await res.json();
      const raw = data.content || 'No response received from AI.';
      lastAiAnswer = raw;

      aiOutputEl.innerHTML = formatOutput(raw);
      if (window.MathJax?.typesetPromise) MathJax.typesetPromise([aiOutputEl]).catch(()=>{});
    } catch (err) {
      console.error(err);
      aiOutputEl.textContent = 'Unexpected error. Please try again.';
    } finally {
      setRunBtnRunning(false);
    }
  }

  function copyCurrentPrompt() {
    if (!currentHelpId || !helpPromptLibrary[currentHelpId]) {
      alert('No prompt selected yet.');
      return;
    }
    const prompt = helpPromptLibrary[currentHelpId].prompt;
    if (!navigator.clipboard?.writeText) return alert('Clipboard not supported in this browser.');
    navigator.clipboard.writeText(prompt).then(() => alert('Prompt copied.')).catch(() => alert('Could not copy prompt.'));
  }

  function copyCurrentAnswer() {
    if (!lastAiAnswer) return alert('No AI answer to copy yet. Run with AI first.');
    if (!navigator.clipboard?.writeText) return alert('Clipboard not supported in this browser.');
    navigator.clipboard.writeText(lastAiAnswer).then(() => alert('Answer copied.')).catch(() => alert('Could not copy answer.'));
  }

  document.addEventListener('DOMContentLoaded', async () => {
    if (window.MathJax?.typesetPromise) MathJax.typesetPromise().catch(()=>{});
    if (typeof updateNavUserDisplay === 'function') updateNavUserDisplay();

    loadHelpPromptFromUrl();

    // Determine tier and gate UI
    let isPaid = false;
    try {
      const user = (typeof getCurrentUser === 'function') ? await getCurrentUser() : null;
      if (user && typeof PS_getUserTier === 'function') {
        const tier = await PS_getUserTier();
        isPaid = (tier === 'paid');
      }
    } catch (_) {}

    gateHelpPageUI(isPaid);
  });
</script>

</body>
</html>
